%!TEX root = project.tex
\documentclass[10pt]{beamer}

% XeLaTeX
\usepackage[no-math]{fontspec}
\usepackage[main = russian, english]{babel}
\usepackage{xltxtra}
\usepackage{xunicode}


% Fonts
\setmainfont[
 BoldFont={Open Sans Bold}, 
 ItalicFont={Open Sans Italic},
 BoldItalicFont={Open Sans Bold Italic}
]{Open Sans}
\setsansfont{Open Sans}
\setmonofont{Liberation Mono}

\newfontfamily\ExtraLight{Open Sans Light}
\newfontfamily\Light{Open Sans}
\newfontfamily\Book{Open Sans}
\newfontfamily\BookBold{Open Sans Bold}

% LENGTHS
\setlength{\parskip}{4pt plus 1pt minus 1pt}
\linespread{1.15}

% Packages
\usepackage{hyperref}
\usepackage{hyperref}
\usepackage{tikz}
\usepackage{xcolor}
\usepackage{ifxetex, ifluatex}
\usepackage{listings}
\hypersetup{colorlinks=true}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{mauve}{rgb}{0.5,0.37,0.37}

\lstset{
  frame=lrtb,
  language=python,
  aboveskip=2mm,
  belowskip=2mm,
  showstringspaces=false,
  columns=fullflexible,
  basicstyle={\ttfamily},
  % numbers=left,
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=4,
  backgroundcolor=\color{gray!7},
  showspaces=false,
  showtabs=false,
  escapeinside={(*@}{@*)},
  rulecolor=\color{gray!10}
}

% === Colors ===
\definecolor{cTitle}{HTML}{129793}
\definecolor{cFrameTitle}{HTML}{505050}
\definecolor{cTitleBack}{HTML}{9BD7D5}
\definecolor{cBackground}{HTML}{FFFBEA}
\definecolor{cSeparator}{HTML}{FF7260}
\definecolor{cText}{HTML}{505050}
\definecolor{cFrameBackground}{HTML}{23373B}
\definecolor{cItem}{HTML}{414141}

\definecolor{cGreen}{HTML}{007A29}
\definecolor{cRed}{HTML}{CC3300}

% setting spectial colors
\setbeamercolor{background canvas}{bg=cBackground}
\setbeamercolor{frametitle}{fg=cFrameTitle, bg=cTitleBack}
\setbeamercolor{title}{fg=cTitle}
\setbeamercolor{progress bar}{fg=cSeparator}
\setbeamercolor{title separator}{fg=cSeparator}
\setbeamercolor{section title}{fg=cTitle}
\setbeamercolor{normal text}{fg=cText, bg=cBackground}
\setbeamercolor{caption name}{fg=cText}
\setbeamercolor{block title}{fg=cText}
\setbeamercolor{block title alerted}{fg=cSeparator}
\setbeamercolor{alerted text}{fg=cSeparator}
\setbeamercolor{alerted text}{fg=cSeparator}
\setbeamercolor{item projected}{fg=cItem}
\setbeamercolor{enumerate item}{fg=cItem}
\setbeamercolor{enumerate subitem}{fg=cItem}
\setbeamercolor{enumerate subsubitem}{fg=cItem}
\setbeamercolor{itemize item}{fg=cItem}
\setbeamercolor{itemize subitem}{fg=cItem}
\setbeamercolor{itemize subsubitem}{fg=cItem}
\setbeamercolor{page number in head/foot}{fg=cText}

\setbeamercolor{palette primary}{
  use=normal text,
  fg=normal text.bg,
  bg=normal text.fg
}

\setbeamerfont{institute}{family=\Light, size=\small}
\setbeamerfont{title}{family=\BookBold, size=\LARGE}
\setbeamerfont{author}{family=\Light, size=\small}
\setbeamerfont{date}{family=\Light, size=\small}
\setbeamerfont{section title}{family=\Book, size=\LARGE}
\setbeamerfont{block title}{family=\Book, size=\normalsize}
\setbeamerfont{block title alerted}{family=\BookBold,size=\normalsize}
\setbeamerfont{subtitle}{family=\Book, size=\fontsize{12}{14}}
\setbeamerfont{frametitle}{family=\BookBold, size=\Large}
\setbeamerfont{framenumber}{family=\Light, size=\footnotesize}
\setbeamerfont{caption}{family=\Light, size=\scriptsize}
\setbeamerfont{caption name}{family=\Light, size=\scriptsize}
\setbeamerfont{description item}{family=\Book}
\setbeamerfont{page number in head/foot}{size=\footnotesize}
\setbeamerfont{bibliography entry author}{family=\Light, size=\normalsize}
\setbeamerfont{bibliography entry title}{family=\Book, size=\normalsize}
\setbeamerfont{bibliography entry location}{family=\Light, size=\normalsize}
\setbeamerfont{bibliography entry note}{family=\Light, size=\small}

% Beamer stuff
\setbeamertemplate{caption}[numbered]
\beamertemplatenavigationsymbolsempty
\addtobeamertemplate{navigation symbols}{}{%
    \usebeamerfont{page number in head/foot}%
    \usebeamercolor[fg]{page number in head/foot}%
    \hspace{1em}%
    \insertframenumber/\inserttotalframenumber
    \hspace{1em}
    \vspace{1em}
}
\setbeamertemplate{frametitle}[default][center]


\makeatletter
\newif\if@notAddFrameNumberOnTitlePage
\@notAddFrameNumberOnTitlePagetrue

\def\maketitle{
  {
  \if@notAddFrameNumberOnTitlePage
    \setbeamertemplate{navigation symbols}{}
    \setbeamertemplate{footline}{}
  \fi
  \ifbeamer@inframe
    \titlepage
  \else
    \frame{\titlepage}
  \fi
  }
}
\makeatother

% title page template
\makeatletter
\setbeamertemplate{title page}
{
    \ifx\insertinstitute\@empty\else
    % \insertinstitute is nonempty
    \vspace*{0.5cm}
    \begin{minipage}[b][\paperheight]{\textwidth}
    \begin{minipage}[c]{\textwidth}
      {{
        \begin{center}
        \usebeamerfont{institute}%
        \usebeamercolor[fg]{institute}%
        \insertinstitute%
        \end{center}
      }}
    \end{minipage}
    \fi

  	\vspace*{1cm}

    \ifx\inserttitlegraphic\@empty\else
    {% \inserttitlegraphic is nonempty
      \vbox to 0pt
      {% display title graphic without changing the position of other elements
        \vspace*{2em}
        \usebeamercolor[fg]{titlegraphic}%
        \inserttitlegraphic%
      }%
      \nointerlineskip%
    }
    \fi

    \vfill%

	\ifx\inserttitle\@empty\else
    {{% \inserttitle is nonempty
      \raggedright%
      \linespread{1.0}%
      \usebeamerfont{title}%
      \usebeamercolor[fg]{title}%
      \begin{center}
      \scshape \inserttitle%
      \end{center}
    }}
    \fi

    \ifx\insertsubtitle\@empty\else
    {{% \insertsubtitle is nonempty
      \usebeamerfont{subtitle}%
      \usebeamercolor[fg]{subtitle}%
      \insertsubtitle%
      \vspace*{0.5em}%
    }}
    \fi

    \vspace*{1em}%

    \ifx\beamer@shortauthor\@empty\else
    {{% \insertauthor is always nonempty by beamer's definition, so we must
      % test another macro which is initialized by \author{...}
      % For details, see http://tex.stackexchange.com/questions/241306/
      \usebeamerfont{author}%
      \usebeamercolor[fg]{author}%
      \insertauthor%
      \par%
      \vspace*{0.25em}
    }}
    \fi

    \vspace{5em}
    \vfill

    \ifx\insertdate\@empty\else
    {{% \insertdate is nonempty
	    \begin{minipage}[c]{\textwidth}
	    {{
	      \begin{center}
		  \usebeamerfont{date}%
		  \usebeamercolor[fg]{date}%
          \insertdate%
          \end{center}
	    }}
	  \end{minipage}
    }}
    \fi
    \vspace{1cm}
  \end{minipage}
}
\makeatother


% STUFF
% \makeatletter
% \def\@listii{\leftmargin\leftmarginii
%               \topsep    20ex
%               \parsep    0\p@   \@plus\p@
%               \itemsep   \parsep}
% \makeatother
